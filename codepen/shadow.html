<!DOCTYPE html>
<html lang="en">
<head>
	  <title>Title</title>
    <meta charset='utf-8' />
    <meta name="description" content="Test : testing" />
    <style type="text/css">
html,
body {
	height: 100%;
	margin: 0;
	background: #111;
	font-family: system-ui, Segoe UI, Roboto, Helvetica, Arial;
	cursor: none;
}

#wrap {
	position: relative;
	height: 100vh;
	width: 100vw;
	overflow: hidden;
}

#iframe,
#dungeon {
	position: absolute;
	inset: 0;
	width: 100%;
	height: 100%;
	border: 0;
}

#overlay {
	position: absolute;
	inset: 0;
	background: rgba(0, 0, 0, 1);
	-webkit-mask-image: radial-gradient(
		circle var(--r, 110px) at var(--x, 50%) var(--y, 50%),
		transparent 0%,
		transparent 60%,
		black 100%
	);
	mask-image: radial-gradient(
		circle var(--r, 110px) at var(--x, 50%) var(--y, 50%),
		transparent 0%,
		transparent 60%,
		black 100%
	);
	transition: -webkit-mask-position 0.06s linear;
	transition: mask-position 0.06s linear;
	pointer-events: auto;
}

#custom-cursor {
	position: fixed;
	top: 0;
	left: 0;
	transform: translate(-50%, -50%);
	pointer-events: none;
	z-index: 999;
}

#controls {
	position: absolute;
	right: 12px;
	top: 12px;
	background: rgba(255, 255, 255, 0.06);
	color: #eee;
	padding: 8px 10px;
	border-radius: 8px;
	backdrop-filter: blur(4px);
	z-index: 40;
	font-size: 13px;
}
#controls input[type="range"] {
	vertical-align: middle;
}
#controls button {
	margin-left: 8px;
	padding: 6px 8px;
	font-size: 13px;
	cursor: pointer;
}
    	
    </style>
</head>
<body class="bg">
	<div id="wrapper">

<div id="wrap">
	<iframe id="dungeon" src="https://watabou.github.io/one-page-dungeon/?seed=1022591351" frameborder="0"></iframe>

	<div id="overlay"></div>

	<div id="custom-cursor">
		<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24">
			<path fill="#f9aa47" d="M6 20h12q.425 0 .713-.288T19 19H5q0 .425.288.713T6 20m6-12q-1.2 0-2-.837t-.75-2.038q.05-1.3.913-2.287T12 1q.975.85 1.838 1.838t.912 2.287q.05 1.2-.75 2.038T12 8m-1 9h2v-6h-2zm1-11q.325 0 .538-.225t.212-.55q0-.425-.238-.775T12 3.775q-.275.325-.513.675t-.237.775q0 .325.213.55T12 6m8.25 11q.325 0 .538-.213T21 16.25t-.213-.537t-.537-.213t-.537.213t-.213.537t.213.538t.537.212M18 22H6q-1.25 0-2.125-.875T3 19v-2h6V9h6v8h2.6q-.05-.2-.075-.375t-.025-.375q0-1.15.8-1.95t1.95-.8t1.95.8t.8 1.95q0 .95-.562 1.675T21 18.9v.1q0 1.25-.875 2.125T18 22m-7-5h2zm1-12.1" />
		</svg>
	</div>

	<div id="controls">
		<label><input type="range" id="radius" min="40" max="300" value="110"> radius</label>
	</div>
</div>

<!-- https://codepen.io/collection/OyELRL/?cursor=eyJwYWdlIjoxfQ== -->


	</div> <!--wrapper-->

	<script>
const overlay = document.getElementById("overlay");
const radiusInput = document.getElementById("radius");
const toggle = document.getElementById("toggle");
const customCursor = document.getElementById("custom-cursor");

let radius = Number(radiusInput.value);
overlay.style.setProperty("--r", radius + "px");

radiusInput.addEventListener("input", (e) => {
	radius = Number(e.target.value);
	overlay.style.setProperty("--r", radius + "px");
});

function setPos(clientX, clientY) {
	const rect = overlay.getBoundingClientRect();

	const maskX = clientX - rect.left;
	const maskY = clientY - rect.top;
	overlay.style.setProperty("--x", maskX + "px");
	overlay.style.setProperty("--y", maskY + "px");

	customCursor.style.transform = `translate(${clientX}px, ${clientY}px)`;
}

overlay.addEventListener("mousemove", (e) => setPos(e.clientX, e.clientY));
overlay.addEventListener(
	"touchmove",
	(e) => {
		if (e.touches && e.touches[0]) {
			setPos(e.touches[0].clientX, e.touches[0].clientY);
		}
		e.preventDefault();
	},
	{ passive: false }
);

setPos(window.innerWidth / 2, window.innerHeight / 2);

let passthrough = false;
let flickerTime = 0;

function animateFlicker() {
	flickerTime += 0.05;
	const flickerOffset = Math.sin(flickerTime * 3) * 3;
	overlay.style.setProperty("--r", radius + flickerOffset + "px");
	requestAnimationFrame(animateFlicker);
}

animateFlicker();

	</script>
	
</body>
</html>
