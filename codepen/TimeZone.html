<!DOCTYPE html>
<html lang="en">
<head>
	  <title>TimeZone Converter</title>
    <meta charset='utf-8' />
    <meta name="description" content="Test : testing" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600&amp;display=swap">
    <style type="text/css">
:root {
  --title: "Time Zone Converter";
  --author: "Matt Cannon";
  --contact: "mc@mattcannon.design";
  --description: "A sleek and efficient time zone converter with country flags, allowing users to easily convert times between different time zones around the world.";
  --keywords: "time zone, converter, international, travel, time difference, world clock, country flags, select2, javascript, css, timezone api, interactive, business tool, global communication, meeting planner";
  --last-modified: "2025-02-24";
  --content-language: "en";
  --generator: "HTML5, CSS3, Javascript, Select2, JQuery, FlagCDN";
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Rubik", sans-serif;
}
body {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #222325;
  height: 100vh;
  padding: 20px;
}
.main {
  border: 2px solid rgb(100, 100, 100);
  padding: 20px;
  background-color: rgb(240, 240, 240);
  width: 100%;
  max-width: 550px;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}
.conversion-container {
  font-size: 16px;
  margin-bottom: 20px;
}
.select-timezone {
  width: 100%;
  margin-bottom: 15px;
  height: 60px !important;
}
label {
  display: block;
  margin-bottom: 10px;
  color: #222325;
}
button {
  padding: 12px;
  font-size: 16px;
  cursor: pointer;
  background-color: #222325;
  color: rgb(255, 255, 255);
  border: none;
  border-radius: 30px;
  transition: background-color 0.3s;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}
button:hover {
  background-color: rgb(60, 60, 60);
}
.convert-time {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}
.input-time-container {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
  width: 100%;
}
.input-time-container > div {
  flex: 1;
  position: relative;
}
#inputDate,
#inputTime {
  padding: 10px;
  border: 1px solid rgb(200, 200, 200);
  border-radius: 5px;
  height: 45px;
  font-size: 16px;
  width: 100%;
}
#result {
  font-size: 16px;
  text-align: center;
  margin-top: 20px;
  color: #333333;
}
table {
  width: 100%;
  margin-top: 20px;
  border-collapse: collapse;
  border-radius: 5px;
  overflow: hidden;
}
table th {
  background-color: #222325;
  color: white;
  text-align: left;
  padding: 10px;
  border-right: 1px solid white;
}
table th:last-child {
  border-right: none;
}
table td {
  padding: 10px;
  text-align: left;
  border: 1px solid rgb(200, 200, 200);
  word-break: break-word;
}
table td > div {
  min-width: 0;
  max-width: 100%;
}
table td img {
  vertical-align: middle;
  width: 24px;
  height: 18px;
  object-fit: cover;
  margin-right: 8px;
  flex-shrink: 0;
  border: 1px solid #eee;
}
table th:first-child {
  border-top-left-radius: 5px;
}
table th:last-child {
  border-top-right-radius: 5px;
}
table tr:last-child td:first-child {
  border-bottom-left-radius: 5px;
}
table tr:last-child td:last-child {
  border-bottom-right-radius: 5px;
}
.select2-container .select2-selection--single {
  height: 45px !important;
  display: flex;
  align-items: center;
}
.select2-selection__rendered {
  line-height: 45px !important;
}
.select2-selection__arrow {
  height: 45px !important;
}
.select2-results__option {
  display: flex;
  align-items: center;
  gap: 8px;
}
.select2-results__option img {
  flex-shrink: 0;
}
.select2-selection__rendered img {
  margin-right: 8px;
}
.select2-container--default
  .select2-selection--single
  .select2-selection__placeholder {
  color: #222325;
}
@media (max-width: 600px) {
  .input-time-container {
    flex-direction: column;
  }
}
.select2-container--default .select2-search--dropdown .select2-search__field {
  height: 40px !important;
  font-size: 16px !important;
}

.custom-time-picker {
  position: relative;
  width: 100%;
}

.custom-time-picker input[type="time"] {
  padding-right: 40px;
}

.time-picker-toggle {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  color: #555;
  cursor: pointer;
  font-size: 18px;
  z-index: 1;
}

.time-picker-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  width: 260px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  padding: 15px;
  display: none;
  z-index: 100;
  margin-top: 8px;
}

.time-picker-dropdown.active {
  display: block;
}

.clock-face {
  width: 150px;
  height: 150px;
  border-radius: 50%;
  background: #f0f0f0;
  position: relative;
  margin: 0 auto 15px;
  border: 2px solid #ddd;
}

.clock-center {
  position: absolute;
  width: 10px;
  height: 10px;
  background: #222325;
  border-radius: 50%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
}

.clock-hour-hand, .clock-minute-hand {
  position: absolute;
  background: #222325;
  transform-origin: bottom center;
  bottom: 50%;
  left: 50%;
  z-index: 1;
  border-radius: 4px;
}

.clock-hour-hand {
  width: 4px;
  height: 35px;
  transform: translateX(-50%) rotate(0deg);
}

.clock-minute-hand {
  width: 2px;
  height: 50px;
  transform: translateX(-50%) rotate(0deg);
}

.clock-numbers {
  position: relative;
  width: 100%;
  height: 100%;
}

.clock-numbers .number {
  position: absolute;
  font-size: 12px;
  color: #333;
  text-align: center;
  width: 24px;
  height: 24px;
  line-height: 24px;
  cursor: pointer;
  border-radius: 50%;
}

.clock-numbers .number:hover {
  background: rgba(0,0,0,0.1);
}

.number[data-hour="12"] { top: 6px; left: calc(50% - 12px); }
.number[data-hour="1"] { top: 14px; right: 34px; }
.number[data-hour="2"] { top: 34px; right: 14px; }
.number[data-hour="3"] { top: calc(50% - 12px); right: 6px; }
.number[data-hour="4"] { bottom: 34px; right: 14px; }
.number[data-hour="5"] { bottom: 14px; right: 34px; }
.number[data-hour="6"] { bottom: 6px; left: calc(50% - 12px); }
.number[data-hour="7"] { bottom: 14px; left: 34px; }
.number[data-hour="8"] { bottom: 34px; left: 14px; }
.number[data-hour="9"] { top: calc(50% - 12px); left: 6px; }
.number[data-hour="10"] { top: 34px; left: 14px; }
.number[data-hour="11"] { top: 14px; left: 34px; }

.time-picker-selectors {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.time-value-selectors {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 10px;
}

.hour-selector, .minute-selector, .ampm-selector {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.time-separator {
  margin: 0 8px;
  font-size: 20px;
  font-weight: bold;
  align-self: center;
}

.hour-value, .minute-value, .ampm-value {
  font-size: 18px;
  font-weight: 500;
  margin: 5px 0;
  width: 35px;
  text-align: center;
}

.arrow-up, .arrow-down {
  background: none;
  border: none;
  color: #222325;
  cursor: pointer;
  padding: 2px;
  font-size: 14px;
}

.arrow-up:hover, .arrow-down:hover {
  color: #555;
}

.time-set-button {
  padding: 8px 15px;
  background-color: #222325;
  color: white;
  border: none;
  border-radius: 20px;
  cursor: pointer;
  transition: background-color 0.3s;
  font-size: 14px;
  font-weight: 500;
}

.time-set-button:hover {
  background-color: #444;
}

.custom-date-input {
  position: relative;
  width: 100%;
}

.custom-date-input input[type="date"] {
  padding-right: 40px;
}

.date-icon {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  color: #555;
  cursor: pointer;
  font-size: 18px;
  z-index: 1;
}

.custom-date-input {
  position: relative;
  width: 100%;
}

.custom-date-input input[type="date"] {
  padding-right: 40px;
  width: 100%;
  background-color: #fff;
}

.date-icon {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  color: #555;
  font-size: 18px;
  pointer-events: none; /* Prevents the icon from intercepting clicks */
    	
    </style>
</head>
<body class="bg">
	<div id="wrapper">

<div class="main">
	<div class="container">
		<div class="conversion-container">
			<label for="fromTimeZone">Starting Time Zone:</label>
			<select class="select-timezone" id="fromTimeZone"></select>

			<div class="input-time-container">
				<div>
					<label for="inputDate"><br>Enter Date:</label>
					<div class="custom-date-input">
						<input type="date" id="inputDate">
						<div class="date-icon">
						</div>
					</div>
				</div>

				<div>
					<label for="inputTime"><br>Enter Time:</label>
					<div class="custom-time-picker">
						<input type="time" id="inputTime" value="00:00">
						<div class="time-picker-toggle">
						</div>
						<div class="time-picker-dropdown">
							<div class="clock-face">
								<div class="clock-center"></div>
								<div class="clock-hour-hand"></div>
								<div class="clock-minute-hand"></div>
								<div class="clock-numbers">
									<span class="number" data-hour="12">12</span>
									<span class="number" data-hour="1">1</span>
									<span class="number" data-hour="2">2</span>
									<span class="number" data-hour="3">3</span>
									<span class="number" data-hour="4">4</span>
									<span class="number" data-hour="5">5</span>
									<span class="number" data-hour="6">6</span>
									<span class="number" data-hour="7">7</span>
									<span class="number" data-hour="8">8</span>
									<span class="number" data-hour="9">9</span>
									<span class="number" data-hour="10">10</span>
									<span class="number" data-hour="11">11</span>
								</div>
							</div>
							<div class="time-picker-selectors">
								<div class="time-value-selectors">
									<div class="hour-selector">
										<button class="arrow-up"><i class="fas fa-chevron-up"></i></button>
										<span class="hour-value">12</span>
										<button class="arrow-down"><i class="fas fa-chevron-down"></i></button>
									</div>
									<div class="time-separator">:</div>
									<div class="minute-selector">
										<button class="arrow-up"><i class="fas fa-chevron-up"></i></button>
										<span class="minute-value">00</span>
										<button class="arrow-down"><i class="fas fa-chevron-down"></i></button>
									</div>
									<div class="ampm-selector">
										<button class="arrow-up"><i class="fas fa-chevron-up"></i></button>
										<span class="ampm-value">AM</span>
										<button class="arrow-down"><i class="fas fa-chevron-down"></i></button>
									</div>
								</div>
								<button class="time-set-button">Set Time</button>
							</div>
						</div>
					</div>
				</div>
			</div>

			<label for="toTimeZone">Destination Time Zone:</label>
			<select class="select-timezone" id="toTimeZone"></select>
		</div>

		<div class="convert-time">
			<button onclick="convertTime()">
				<i class="fas fa-clock"></i> Convert Time
			</button>
		</div>
		<div class="result-container" id="result" data-timestamp="">
		</div>
	</div>
</div>

	</div> <!--wrapper-->
	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

	<script>
const countryNames = {
	AD: "Andorra",
	AE: "United Arab Emirates",
	AF: "Afghanistan",
	AG: "Antigua and Barbuda",
	AI: "Anguilla",
	AL: "Albania",
	AM: "Armenia",
	AO: "Angola",
	AR: "Argentina",
	AS: "American Samoa",
	AT: "Austria",
	AU: "Australia",
	AW: "Aruba",
	AZ: "Azerbaijan",
	BA: "Bosnia and Herzegovina",
	BB: "Barbados",
	BD: "Bangladesh",
	BE: "Belgium",
	BF: "Burkina Faso",
	BG: "Bulgaria",
	BH: "Bahrain",
	BI: "Burundi",
	BJ: "Benin",
	BM: "Bermuda",
	BN: "Brunei",
	BO: "Bolivia",
	BR: "Brazil",
	BS: "Bahamas",
	BT: "Bhutan",
	BW: "Botswana",
	BY: "Belarus",
	BZ: "Belize",
	CA: "Canada",
	CD: "Democratic Republic of the Congo",
	CF: "Central African Republic",
	CG: "Republic of the Congo",
	CH: "Switzerland",
	CI: "Côte d'Ivoire",
	CL: "Chile",
	CM: "Cameroon",
	CN: "China",
	CO: "Colombia",
	CR: "Costa Rica",
	CU: "Cuba",
	CV: "Cape Verde",
	CY: "Cyprus",
	CZ: "Czech Republic",
	DE: "Germany",
	DJ: "Djibouti",
	DK: "Denmark",
	DM: "Dominica",
	DO: "Dominican Republic",
	DZ: "Algeria",
	EC: "Ecuador",
	EE: "Estonia",
	EG: "Egypt",
	ER: "Eritrea",
	ES: "Spain",
	ET: "Ethiopia",
	FI: "Finland",
	FJ: "Fiji",
	FK: "Falkland Islands",
	FM: "Micronesia",
	FR: "France",
	GA: "Gabon",
	GB: "United Kingdom",
	GD: "Grenada",
	GE: "Georgia",
	GH: "Ghana",
	GM: "Gambia",
	GN: "Guinea",
	GQ: "Equatorial Guinea",
	GR: "Greece",
	GT: "Guatemala",
	GW: "Guinea-Bissau",
	GY: "Guyana",
	HK: "Hong Kong",
	HN: "Honduras",
	HR: "Croatia",
	HT: "Haiti",
	HU: "Hungary",
	ID: "Indonesia",
	IE: "Ireland",
	IL: "Israel",
	IN: "India",
	IQ: "Iraq",
	IR: "Iran",
	IS: "Iceland",
	IT: "Italy",
	JM: "Jamaica",
	JO: "Jordan",
	JP: "Japan",
	KE: "Kenya",
	KG: "Kyrgyzstan",
	KH: "Cambodia",
	KI: "Kiribati",
	KM: "Comoros",
	KN: "Saint Kitts and Nevis",
	KR: "South Korea",
	KW: "Kuwait",
	KZ: "Kazakhstan",
	LA: "Laos",
	LB: "Lebanon",
	LC: "Saint Lucia",
	LI: "Liechtenstein",
	LK: "Sri Lanka",
	LR: "Liberia",
	LS: "Lesotho",
	LT: "Lithuania",
	LU: "Luxembourg",
	LV: "Latvia",
	LY: "Libya",
	MA: "Morocco",
	MC: "Monaco",
	MD: "Moldova",
	ME: "Montenegro",
	MG: "Madagascar",
	MH: "Marshall Islands",
	MK: "North Macedonia",
	ML: "Mali",
	MM: "Myanmar",
	MN: "Mongolia",
	MO: "Macao",
	MR: "Mauritania",
	MS: "Montserrat",
	MT: "Malta",
	MU: "Mauritius",
	MV: "Maldives",
	MW: "Malawi",
	MX: "Mexico",
	MY: "Malaysia",
	MZ: "Mozambique",
	NA: "Namibia",
	NC: "New Caledonia",
	NE: "Niger",
	NG: "Nigeria",
	NI: "Nicaragua",
	NL: "Netherlands",
	NO: "Norway",
	NP: "Nepal",
	NR: "Nauru",
	NU: "Niue",
	NZ: "New Zealand",
	OM: "Oman",
	PA: "Panama",
	PE: "Peru",
	PG: "Papua New Guinea",
	PH: "Philippines",
	PK: "Pakistan",
	PL: "Poland",
	PT: "Portugal",
	PW: "Palau",
	PY: "Paraguay",
	QA: "Qatar",
	RO: "Romania",
	RS: "Serbia",
	RU: "Russia",
	RW: "Rwanda",
	SA: "Saudi Arabia",
	SB: "Solomon Islands",
	SC: "Seychelles",
	SD: "Sudan",
	SE: "Sweden",
	SG: "Singapore",
	SI: "Slovenia",
	SK: "Slovakia",
	SL: "Sierra Leone",
	SM: "San Marino",
	SN: "Senegal",
	SO: "Somalia",
	SR: "Suriname",
	SS: "South Sudan",
	ST: "São Tomé and Príncipe",
	SV: "El Salvador",
	SX: "Sint Maarten",
	SY: "Syria",
	SZ: "Eswatini",
	TC: "Turks and Caicos Islands",
	TD: "Chad",
	TG: "Togo",
	TH: "Thailand",
	TJ: "Tajikistan",
	TL: "Timor-Leste",
	TM: "Turkmenistan",
	TN: "Tunisia",
	TO: "Tonga",
	TR: "Turkey",
	TT: "Trinidad and Tobago",
	TW: "Taiwan",
	TZ: "Tanzania",
	UA: "Ukraine",
	UG: "Uganda",
	US: "United States",
	UY: "Uruguay",
	UZ: "Uzbekistan",
	VA: "Vatican City",
	VC: "Saint Vincent and the Grenadines",
	VE: "Venezuela",
	VG: "British Virgin Islands",
	VI: "U.S. Virgin Islands",
	VN: "Vietnam",
	VU: "Vanuatu",
	WF: "Wallis and Futuna",
	WS: "Samoa",
	YE: "Yemen",
	YT: "Mayotte",
	ZA: "South Africa",
	ZM: "Zambia",
	ZW: "Zimbabwe",
	AX: "Åland Islands",
	GL: "Greenland",
	GG: "Guernsey",
	JE: "Jersey",
	IO: "British Indian Ocean Territory",
	CC: "Cocos (Keeling) Islands",
	TF: "French Southern Territories",
	CX: "Christmas Island",
	EH: "Western Sahara",
	IM: "Isle of Man",
	RE: "Réunion",
	PM: "Saint Pierre and Miquelon",
	BL: "Saint Barthélemy",
	MF: "Saint Martin",
	PN: "Pitcairn",
	GS: "South Georgia and the South Sandwich Islands",
	SH: "Saint Helena",
	NF: "Norfolk Island",
	CK: "Cook Islands",
	TK: "Tokelau",
	MQ: "Martinique",
	PF: "French Polynesia",
	MC: "Monaco",
	XK: "Kosovo"
};

// Comprehensive and Sorted IANA Time Zones with Country Codes and Abbreviations
var aryIanaTimeZones = [
	// United States Time Zones (Limited to 6 with Abbreviations)
	{ zone: "America/New_York", country: "US", abbreviation: "EST" },
	{ zone: "America/Chicago", country: "US", abbreviation: "CST" },
	{ zone: "America/Denver", country: "US", abbreviation: "MST" },
	{ zone: "America/Los_Angeles", country: "US", abbreviation: "PST" },
	{ zone: "America/Anchorage", country: "US", abbreviation: "AKST" },
	{ zone: "Pacific/Honolulu", country: "US", abbreviation: "HST" },

	// Europe
	{ zone: "Europe/London", country: "GB", abbreviation: "GMT" },
	{ zone: "Europe/Berlin", country: "DE", abbreviation: "CET" },
	{ zone: "Europe/Paris", country: "FR", abbreviation: "CET" },
	{ zone: "Europe/Rome", country: "IT", abbreviation: "CET" },
	{ zone: "Europe/Madrid", country: "ES", abbreviation: "CET" },
	{ zone: "Europe/Athens", country: "GR", abbreviation: "EET" },
	{ zone: "Europe/Moscow", country: "RU", abbreviation: "MSK" },
	{ zone: "Europe/Amsterdam", country: "NL", abbreviation: "CET" },
	{ zone: "Europe/Vienna", country: "AT", abbreviation: "CET" },
	{ zone: "Europe/Budapest", country: "HU", abbreviation: "CET" },
	{ zone: "Europe/Prague", country: "CZ", abbreviation: "CET" },
	{ zone: "Europe/Warsaw", country: "PL", abbreviation: "CET" },
	{ zone: "Europe/Lisbon", country: "PT", abbreviation: "WET" },
	{ zone: "Europe/Zurich", country: "CH", abbreviation: "CET" },
	{ zone: "Europe/Stockholm", country: "SE", abbreviation: "CET" },
	{ zone: "Europe/Dublin", country: "IE", abbreviation: "GMT" },
	{ zone: "Europe/Brussels", country: "BE", abbreviation: "CET" },
	{ zone: "Europe/Ljubljana", country: "SI", abbreviation: "CET" },
	{ zone: "Europe/Oslo", country: "NO", abbreviation: "CET" },
	{ zone: "Europe/Gibraltar", country: "GI", abbreviation: "CET" },
	{ zone: "Europe/Minsk", country: "BY", abbreviation: "MSK" },

	// Asia
	{ zone: "Asia/Tokyo", country: "JP", abbreviation: "JST" },
	{ zone: "Asia/Shanghai", country: "CN", abbreviation: "CST" },
	{ zone: "Asia/Kolkata", country: "IN", abbreviation: "IST" },
	{ zone: "Asia/Singapore", country: "SG", abbreviation: "SGT" },
	{ zone: "Asia/Dubai", country: "AE", abbreviation: "GST" },
	{ zone: "Asia/Bangkok", country: "TH", abbreviation: "ICT" },
	{ zone: "Asia/Hong_Kong", country: "HK", abbreviation: "HKT" },
	{ zone: "Asia/Seoul", country: "KR", abbreviation: "KST" },
	{ zone: "Asia/Kathmandu", country: "NP", abbreviation: "NPT" },
	{ zone: "Asia/Amman", country: "JO", abbreviation: "EET" },
	{ zone: "Asia/Dhaka", country: "BD", abbreviation: "BST" },
	{ zone: "Asia/Taipei", country: "TW", abbreviation: "CST" },
	{ zone: "Asia/Kabul", country: "AF", abbreviation: "AFT" },
	{ zone: "Asia/Riyadh", country: "SA", abbreviation: "AST" },
	{ zone: "Asia/Bishkek", country: "KG", abbreviation: "KGT" },

	// Australia
	{ zone: "Australia/Sydney", country: "AU", abbreviation: "AEST" },
	{ zone: "Australia/Perth", country: "AU", abbreviation: "AWST" },
	{ zone: "Australia/Brisbane", country: "AU", abbreviation: "AEST" },
	{ zone: "Australia/Adelaide", country: "AU", abbreviation: "ACST" },
	{ zone: "Australia/Darwin", country: "AU", abbreviation: "ACST" },
	{ zone: "Australia/Hobart", country: "AU", abbreviation: "AEDT" },

	// Africa
	{ zone: "Africa/Cairo", country: "EG", abbreviation: "EET" },
	{ zone: "Africa/Johannesburg", country: "ZA", abbreviation: "SAST" },
	{ zone: "Africa/Nairobi", country: "KE", abbreviation: "EAT" },
	{ zone: "Africa/Lagos", country: "NG", abbreviation: "WAT" },
	{ zone: "Africa/Algiers", country: "DZ", abbreviation: "CET" },
	{ zone: "Africa/Kampala", country: "UG", abbreviation: "EAT" },
	{ zone: "Africa/Addis_Ababa", country: "ET", abbreviation: "EAT" },
	{ zone: "Africa/Casablanca", country: "MA", abbreviation: "WET" },

	// Others (Example Time Zones)
	{ zone: "America/Sao_Paulo", country: "BR", abbreviation: "BRT" },
	{ zone: "America/Mexico_City", country: "MX", abbreviation: "CST" },
	{ zone: "Asia/Almaty", country: "KZ", abbreviation: "ALMT" },
	{ zone: "Europe/Ljubljana", country: "SI", abbreviation: "CET" },
	{ zone: "Europe/Oslo", country: "NO", abbreviation: "CET" },
	{ zone: "Europe/Rome", country: "IT", abbreviation: "CET" },
	{ zone: "Europe/Moscow", country: "RU", abbreviation: "MSK" },
	{ zone: "Europe/Paris", country: "FR", abbreviation: "CET" },
	{ zone: "Asia/Kuala_Lumpur", country: "MY", abbreviation: "MYT" },
	{ zone: "Asia/Singapore", country: "SG", abbreviation: "SGT" },
	{ zone: "Asia/Bangkok", country: "TH", abbreviation: "ICT" },
	{ zone: "Asia/Dubai", country: "AE", abbreviation: "GST" }
];

// Format the Select2 options with flags and country names
function formatTimezoneWithFlag(item) {
	if (!item.id) return item.text; // Return text for placeholders and dividers
	const countryCode = item.element.dataset.country.toLowerCase();
	const countryName =
		countryNames[item.element.dataset.country] || item.element.dataset.country;
	const abbreviation = item.element.dataset.abbreviation || "";
	return $(`
    <div style="display: flex; align-items: center; gap: 8px;">
      <img src="https://flagcdn.com/w20/${countryCode}.png" style="width: 24px; height: 18px; object-fit: cover; border: 1px solid #eee;" alt="${countryCode.toUpperCase()} flag">
      <span>${countryName} (${abbreviation}) - ${item.text}</span>
    </div>
  `);
}

function generateTimezoneOptions() {
	var fromTimeZoneSelect = document.getElementById("fromTimeZone");
	var toTimeZoneSelect = document.getElementById("toTimeZone");

	// Sort the time zones alphabetically by country name and then by zone
	aryIanaTimeZones.sort((a, b) => {
		const countryA = countryNames[a.country] || a.country;
		const countryB = countryNames[b.country] || b.country;
		if (countryA < countryB) return -1;
		if (countryA > countryB) return 1;
		// If same country, sort by zone
		if (a.zone < b.zone) return -1;
		if (a.zone > b.zone) return 1;
		return 0;
	});

	aryIanaTimeZones.forEach((timeZone) => {
		var option = document.createElement("option");
		option.value = timeZone.zone;
		option.textContent = timeZone.zone;
		option.dataset.country = timeZone.country;
		option.dataset.abbreviation = timeZone.abbreviation;
		fromTimeZoneSelect.appendChild(option.cloneNode(true));
		toTimeZoneSelect.appendChild(option.cloneNode(true));
	});

	// Pre-select default time zones (optional)
	fromTimeZoneSelect.selectedIndex = 0; // First option
	toTimeZoneSelect.selectedIndex = 1; // Second option
}

// Convert Date to MM/DD/YY format with 2-digit year
function formatDateMMDDYY(date) {
	const mm = String(date.getMonth() + 1).padStart(2, "0"); // Months start from 0
	const dd = String(date.getDate()).padStart(2, "0");
	const yy = String(date.getFullYear()).slice(-2);
	return `${mm}/${dd}/${yy}`;
}

function convertTime() {
	// Create a new result element to replace the existing one
	const resultContainer = document.getElementById("result");
	if (resultContainer) {
		// Clear existing content
		resultContainer.innerHTML = "";
	}

	const fromTimeZone = document.getElementById("fromTimeZone").value;
	const toTimeZone = document.getElementById("toTimeZone").value;
	const inputDate = document.getElementById("inputDate").value;
	const inputTime = document.getElementById("inputTime").value;

	if (!fromTimeZone || !toTimeZone || !inputDate || !inputTime) {
		document.getElementById("result").innerHTML =
			"<br><i class='fas fa-exclamation-circle' style='color: #222325;'></i> <strong>Please enter your time zones and date.</strong>";
		return;
	}

	try {
		// Format the input date to MM/DD/YY
		const [year, month, day] = inputDate.split("-");
		const formattedInputDate = `${month}/${day}/${year.substring(2)}`;

		// Format the input time to 12-hour format with AM/PM
		let [hours, minutes] = inputTime.split(":");
		hours = parseInt(hours);
		let period = "AM";

		if (hours >= 12) {
			period = "PM";
			if (hours > 12) hours -= 12;
		} else if (hours === 0) {
			hours = 12;
		}

		const formattedInputTime = `${hours}:${minutes} ${period}`;

		// Create a date object for conversion
		const dateObj = new Date(`${inputDate}T${inputTime}:00`);

		// Convert to the destination timezone
		const options = {
			year: "numeric",
			month: "2-digit",
			day: "2-digit",
			hour: "numeric",
			minute: "2-digit",
			hour12: true,
			timeZone: toTimeZone
		};

		const convertedFullStr = dateObj.toLocaleString("en-US", options);

		// Parse the converted date/time
		const convertedMatch = convertedFullStr.match(
			/(\d{2})\/(\d{2})\/(\d{4}), (\d{1,2}):(\d{2}) (AM|PM)/
		);
		if (!convertedMatch) {
			throw new Error("Failed to parse converted time");
		}

		const convertedMonth = convertedMatch[1];
		const convertedDay = convertedMatch[2];
		const convertedYear = convertedMatch[3].slice(-2);
		const convertedHour = convertedMatch[4];
		const convertedMinute = convertedMatch[5];
		const convertedPeriod = convertedMatch[6];

		const formattedConvertedDate = `${convertedMonth}/${convertedDay}/${convertedYear}`;
		const formattedConvertedTime = `${convertedHour}:${convertedMinute} ${convertedPeriod}`;

		// Get country information
		const fromFlag = document
			.querySelector("#fromTimeZone option:checked")
			.dataset.country.toLowerCase();
		const toFlag = document
			.querySelector("#toTimeZone option:checked")
			.dataset.country.toLowerCase();

		const fromCountryCode = document.querySelector("#fromTimeZone option:checked")
			.dataset.country;
		const toCountryCode = document.querySelector("#toTimeZone option:checked")
			.dataset.country;

		const fromAbbreviation = document.querySelector(
			"#fromTimeZone option:checked"
		).dataset.abbreviation;
		const toAbbreviation = document.querySelector("#toTimeZone option:checked")
			.dataset.abbreviation;

		// Display the result
		const resultElement = document.getElementById("result");
		resultElement.innerHTML = `
        <table>
          <tr>
            <th>Country</th>
            <th>Date</th>
            <th>Time</th>
          </tr>
          <tr>
            <td>
              <div style="display: flex; align-items: center;">
                <img src="https://flagcdn.com/w20/${fromFlag}.png" style="width: 24px; height: 18px; object-fit: cover; margin-right: 8px; border: 1px solid #eee;" alt="${fromCountryCode.toUpperCase()} flag">
                <span style="white-space: normal;">${
																	countryNames[fromCountryCode] || fromCountryCode
																} (${fromAbbreviation})</span>
              </div>
            </td>
            <td>${formattedInputDate}</td>
            <td>${formattedInputTime}</td>
          </tr>
          <tr>
            <td>
              <div style="display: flex; align-items: center;">
                <img src="https://flagcdn.com/w20/${toFlag}.png" style="width: 24px; height: 18px; object-fit: cover; margin-right: 8px; border: 1px solid #eee;" alt="${toCountryCode.toUpperCase()} flag">
                <span style="white-space: normal;">${
																	countryNames[toCountryCode] || toCountryCode
																} (${toAbbreviation})</span>
              </div>
            </td>
            <td>${formattedConvertedDate}</td>
            <td>${formattedConvertedTime}</td>
          </tr>
        </table>
    `;
	} catch (error) {
		document.getElementById("result").innerHTML =
			"<i class='fas fa-exclamation-circle' style='color: red;'></i> <strong><br>Error in time conversion. Please check your inputs.</strong>";
		console.error("Conversion error:", error);
	}
}

function initTimePicker() {
	const timePicker = document.querySelector(".custom-time-picker");
	const timeInput = document.getElementById("inputTime");
	const toggleBtn = document.querySelector(".time-picker-toggle");
	const dropdown = document.querySelector(".time-picker-dropdown");
	const hourHand = document.querySelector(".clock-hour-hand");
	const minuteHand = document.querySelector(".clock-minute-hand");
	const hourValue = document.querySelector(".hour-value");
	const minuteValue = document.querySelector(".minute-value");
	const ampmValue = document.querySelector(".ampm-value");
	const setTimeBtn = document.querySelector(".time-set-button");
	const hourNumbers = document.querySelectorAll(".number");

	let hours = 12;
	let minutes = 0;
	let ampm = "AM";

	// Initialize with current input value or default
	function updateFromInput() {
		if (timeInput.value) {
			const [h, m] = timeInput.value.split(":");
			hours = parseInt(h);
			minutes = parseInt(m);

			// Convert 24h to 12h format for display
			if (hours >= 12) {
				ampm = "PM";
				hourValue.textContent = hours === 12 ? 12 : hours - 12;
			} else {
				ampm = "AM";
				hourValue.textContent = hours === 0 ? 12 : hours;
			}

			minuteValue.textContent = minutes.toString().padStart(2, "0");
			ampmValue.textContent = ampm;

			updateClockHands();
		}
	}

	function updateClockHands() {
		// Hour hand rotates 30 degrees per hour plus a bit for minutes
		const hourDegrees = (hours % 12) * 30 + minutes / 2;
		// Minute hand rotates 6 degrees per minute
		const minuteDegrees = minutes * 6;

		hourHand.style.transform = `translateX(-50%) rotate(${hourDegrees}deg)`;
		minuteHand.style.transform = `translateX(-50%) rotate(${minuteDegrees}deg)`;
	}

	function updateTimeInput() {
		// Convert 12h to 24h format for the input
		let h = hours;
		if (ampm === "PM" && hours < 12) h += 12;
		if (ampm === "AM" && hours === 12) h = 0;

		timeInput.value = `${h
			.toString()
			.padStart(2, "0")}:${minutes.toString().padStart(2, "0")}`;

		// Trigger the change event to update conversion
		timeInput.dispatchEvent(new Event("change"));
	}

	// Toggle dropdown
	toggleBtn.addEventListener("click", () => {
		dropdown.classList.toggle("active");
		updateFromInput();
	});

	// Close dropdown when clicking outside
	document.addEventListener("click", (e) => {
		if (!timePicker.contains(e.target)) {
			dropdown.classList.remove("active");
		}
	});

	// Clock number clicks
	hourNumbers.forEach((number) => {
		number.addEventListener("click", () => {
			const clickedHour = parseInt(number.dataset.hour);
			hours =
				ampm === "PM" && clickedHour !== 12
					? clickedHour + 12
					: ampm === "AM" && clickedHour === 12
					? 0
					: clickedHour;

			hourValue.textContent = clickedHour;
			updateClockHands();
		});
	});

	// Hour up/down
	document
		.querySelector(".hour-selector .arrow-up")
		.addEventListener("click", () => {
			let displayHour = parseInt(hourValue.textContent);
			displayHour = displayHour >= 12 ? 1 : displayHour + 1;
			hourValue.textContent = displayHour;

			hours =
				ampm === "PM" && displayHour !== 12
					? displayHour + 12
					: ampm === "AM" && displayHour === 12
					? 0
					: displayHour;

			updateClockHands();
		});

	document
		.querySelector(".hour-selector .arrow-down")
		.addEventListener("click", () => {
			let displayHour = parseInt(hourValue.textContent);
			displayHour = displayHour <= 1 ? 12 : displayHour - 1;
			hourValue.textContent = displayHour;

			hours =
				ampm === "PM" && displayHour !== 12
					? displayHour + 12
					: ampm === "AM" && displayHour === 12
					? 0
					: displayHour;

			updateClockHands();
		});

	// Minute up/down
	document
		.querySelector(".minute-selector .arrow-up")
		.addEventListener("click", () => {
			minutes = (minutes + 5) % 60;
			minuteValue.textContent = minutes.toString().padStart(2, "0");
			updateClockHands();
		});

	document
		.querySelector(".minute-selector .arrow-down")
		.addEventListener("click", () => {
			minutes = (minutes - 5 + 60) % 60;
			minuteValue.textContent = minutes.toString().padStart(2, "0");
			updateClockHands();
		});

	// AM/PM toggle
	document
		.querySelector(".ampm-selector .arrow-up")
		.addEventListener("click", () => {
			ampm = ampm === "AM" ? "PM" : "AM";
			ampmValue.textContent = ampm;
		});

	document
		.querySelector(".ampm-selector .arrow-down")
		.addEventListener("click", () => {
			ampm = ampm === "AM" ? "PM" : "AM";
			ampmValue.textContent = ampm;
		});

	// Set time button
	setTimeBtn.addEventListener("click", () => {
		updateTimeInput();
		dropdown.classList.remove("active");
	});

	// Initialize
	updateFromInput();
}

$(document).ready(function () {
	// Reset the results area on page load
	document.getElementById("result").innerHTML = "";

	$(".select-timezone")
		.select2({
			placeholder: "Search...",
			templateResult: formatTimezoneWithFlag,
			templateSelection: formatTimezoneWithFlag,
			width: "resolve",
			escapeMarkup: function (markup) {
				return markup;
			}
		})
		.on("select2:open", function () {
			// Set the placeholder for the search input
			$(".select2-search__field").attr("placeholder", "Search...");
		});
	generateTimezoneOptions();

	// Set today's date as default
	const today = new Date();
	const year = today.getFullYear();
	const month = String(today.getMonth() + 1).padStart(2, "0");
	const day = String(today.getDate()).padStart(2, "0");
	document.getElementById("inputDate").value = `${year}-${month}-${day}`;

	// Set current time as default
	const hours = String(today.getHours()).padStart(2, "0");
	const minutes = String(today.getMinutes()).padStart(2, "0");
	document.getElementById("inputTime").value = `${hours}:${minutes}`;

	// Initialize the custom time picker
	initTimePicker();

	// Auto-convert on load after a brief delay to ensure everything is loaded
	setTimeout(function () {
		convertTime();
	}, 1000);

	// Add event listeners for automatic conversion
	document
		.getElementById("fromTimeZone")
		.addEventListener("change", convertTime);
	document.getElementById("toTimeZone").addEventListener("change", convertTime);
	document.getElementById("inputDate").addEventListener("change", convertTime);
	document.getElementById("inputTime").addEventListener("change", convertTime);
});

	</script>
	
</body>
</html>
